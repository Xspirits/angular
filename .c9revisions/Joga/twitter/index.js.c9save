{"ts":1364011507597,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var Schema, Tweet, TweetSchema, config, mongoose, twit, twitter;\n\nmongoose = require('mongoose');\n\ntwitter = require('ntwitter');\n\nSchema = mongoose.Schema;\n\nmongoose.set('debug', false);\n\nconsole.log(\"====== Connecting to our Database ======\");\n\nmongoose.connect(\"mongodb://localhost/joga_analytics\", function(err) {\n  if (err) {\n    console.error(\"Mongo connection failed\");\n  }\n  return console.log(\"connected to joga_analytics\");\n});\n\nconsole.log(\"====== Connecting to the api ======\");\n\nconfig = {\n  key: \"jxeE3wqzjEJgaN9kzMsXOA\",\n  secret: \"sA4h2SEpi28SteeIjc2DDpzXmpU5shvZ398spQV5HE\",\n  tokenKey: \"80673759-VaBic5yFFuarZLsXcouC18vvI35ppw4xs427rIss\",\n  tokenSecret: \"W0ReIYC1fh6oBY095Pc12jryOgLqncS2v8lhG2eWHg\"\n};\n\ntwit = new twitter({\n  consumer_key: config.key,\n  consumer_secret: config.secret,\n  access_token_key: config.tokenKey,\n  access_token_secret: config.tokenSecret\n});\n\nTweetSchema = new Schema({\n  id: {\n    type: Number\n  },\n  created_at: {\n    type: String\n  },\n  text: {\n    type: String\n  },\n  retweet_count: {\n    type: Number\n  },\n  user: {\n    id: {\n      type: Number\n    },\n    name: {\n      type: String\n    },\n    screen_name: {\n      type: String\n    },\n    location: {\n      type: String\n    },\n    followers_count: {\n      type: Number\n    },\n    friends_count: {\n      type: Number\n    },\n    created_at: {\n      type: Date\n    },\n    verified: {\n      type: Boolean\n    },\n    statuses_count: {\n      type: Number\n    },\n    profile_image_url: {\n      type: String\n    },\n    profile_banner_url: {\n      type: String\n    }\n  }\n});\n\nconsole.log(\"====== Begin stream parse pickup+soccer, > 200 followers ======\");\n\nTweet = mongoose.model('Tweet', TweetSchema);\n\ntwit.stream('statuses/filter', {\n  'track': \"pickup+soccer\"\n}, function(stream) {\n  return stream.on('data', function(doc) {\n    if (doc.user.followers_count > 200) {\n      return Tweet.create(doc, function(err, tweet) {\n        return console.log(\"INSERTED - \" + tweet.user.screen_name + \" with \" + tweet.user.followers_count + \" followers\");\n      });\n    }\n  });\n});\n"]],"start1":0,"start2":0,"length1":0,"length2":2065}]],"length":2065}
