{"ts":1364011510331,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"mongoose = require 'mongoose'\ntwitter  = require 'ntwitter'\nSchema   = mongoose.Schema\n\nmongoose.set 'debug', off\n\nconsole.log \"====== Connecting to our Database ======\"\n# connect to mongo\nmongoose.connect \"mongodb://localhost/joga_analytics\", (err) ->\n  console.error \"Mongo connection failed\" if err\n  console.log \"connected to joga_analytics\"\n\nconsole.log \"====== Connecting to the api ======\"\n# tweeter api config\nconfig =\n  key          : \"jxeE3wqzjEJgaN9kzMsXOA\"\n  secret       : \"sA4h2SEpi28SteeIjc2DDpzXmpU5shvZ398spQV5HE\"\n  tokenKey     : \"80673759-VaBic5yFFuarZLsXcouC18vvI35ppw4xs427rIss\"\n  tokenSecret  : \"W0ReIYC1fh6oBY095Pc12jryOgLqncS2v8lhG2eWHg\"\n\ntwit = new twitter\n  consumer_key: config.key\n  consumer_secret: config.secret\n  access_token_key: config.tokenKey\n  access_token_secret: config.tokenSecret\n\nTweetSchema = new Schema\n  id           : {type: Number}\n  created_at   : {type: String}\n  text         : {type: String}\n  retweet_count: {type: Number}\n  user:\n    id                : {type: Number}\n    name              : {type: String}\n    screen_name       : {type: String}\n    location          : {type: String}\n    followers_count   : {type: Number}\n    friends_count     : {type: Number}\n    created_at        : {type: Date}\n    verified          : {type: Boolean}\n    statuses_count    : {type: Number}\n    profile_image_url : {type: String}\n    profile_banner_url: {type: String}\n\nconsole.log \"====== Begin stream parse pickup+soccer, > 200 followers ======\"\nTweet = mongoose.model 'Tweet', TweetSchema\n\ntwit.stream 'statuses/filter', {'track': \"pickup+soccer\"}, (stream) ->\n  stream.on 'data', (doc) ->\n    return if doc.user.followers_count > 200\n      Tweet.create doc, (err, tweet) -> \n        console.log \"INSERTED - \"+tweet.user.screen_name+ \" with \" +tweet.user.followers_count + \" followers\"\n"]],"start1":0,"start2":0,"length1":0,"length2":1830}]],"length":1830}
